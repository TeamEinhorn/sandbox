sudo: required

language: java
jdk:
  - oraclejdk8
  
services:
  - docker
  
  
before_install:
  - chmod +x gradlew

install:
  - ./gradlew shadowJar
  - docker build -t sandbox .

before_script:
  - docker run -p 127.0.0.1:10080:8080 -d --name sandbox sandbox
  
script:
  - ./gradlew check
  - docker ps | grep -q sandbox
  - wget http://127.0.0.1:10080 | grep Hello
  
after_success:
  - echo "Upload to docker hub"
  
after_script:

